<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="mongodb,">










<meta name="description" content="一、查询find方法1db.collection_name.find(); 查询所有的结果：12select * from users;db.users.find(); 指定返回那些列（键）：123select name, skills from users;db.users.find(&amp;#123;&amp;#125;, &amp;#123;&amp;apos;name&amp;apos; : 1, &amp;apos;skills&amp;a">
<meta name="keywords" content="mongodb">
<meta property="og:type" content="article">
<meta property="og:title" content="MongoDB 常用命令？">
<meta property="og:url" content="http://yunheli.github.io/2014/01/20/2014-1-20-mongodb-methods/index.html">
<meta property="og:site_name" content="Will">
<meta property="og:description" content="一、查询find方法1db.collection_name.find(); 查询所有的结果：12select * from users;db.users.find(); 指定返回那些列（键）：123select name, skills from users;db.users.find(&amp;#123;&amp;#125;, &amp;#123;&amp;apos;name&amp;apos; : 1, &amp;apos;skills&amp;a">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-01-10T09:38:05.658Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MongoDB 常用命令？">
<meta name="twitter:description" content="一、查询find方法1db.collection_name.find(); 查询所有的结果：12select * from users;db.users.find(); 指定返回那些列（键）：123select name, skills from users;db.users.find(&amp;#123;&amp;#125;, &amp;#123;&amp;apos;name&amp;apos; : 1, &amp;apos;skills&amp;a">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yunheli.github.io/2014/01/20/2014-1-20-mongodb-methods/">





  <title>MongoDB 常用命令？ | Will</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Will</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">will's blogs</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yunheli.github.io/2014/01/20/2014-1-20-mongodb-methods/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Will">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Will">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">MongoDB 常用命令？</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-01-20T00:00:00+00:00">
                2014-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="一、查询"><a href="#一、查询" class="headerlink" title="一、查询"></a>一、查询</h2><h3 id="find方法"><a href="#find方法" class="headerlink" title="find方法"></a><code>find方法</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection_name.find();</span><br></pre></td></tr></table></figure>
<h3 id="查询所有的结果："><a href="#查询所有的结果：" class="headerlink" title="查询所有的结果："></a><code>查询所有的结果：</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from users;</span><br><span class="line">db.users.find();</span><br></pre></td></tr></table></figure>
<h3 id="指定返回那些列（键）："><a href="#指定返回那些列（键）：" class="headerlink" title="指定返回那些列（键）："></a><code>指定返回那些列（键）：</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select name, skills from users;</span><br><span class="line">db.users.find(&#123;&#125;, &#123;&apos;name&apos; : 1, &apos;skills&apos; : 1&#125;);</span><br><span class="line">补充说明： 第一个&#123;&#125; 放where条件 第二个&#123;&#125; 指定那些列显示和不显示 （0表示不显示 1表示显示)</span><br></pre></td></tr></table></figure>
<h3 id="where条件："><a href="#where条件：" class="headerlink" title="where条件："></a><code>where条件：</code></h3><h4 id="1-简单的等于"><a href="#1-简单的等于" class="headerlink" title="1.简单的等于:"></a><code>1.简单的等于:</code></h4><pre><code>select name, age, skills from users where name = &apos;hurry&apos;;
db.users.find({&apos;name&apos; : &apos;hurry&apos;},{&apos;name&apos; : 1, &apos;age&apos; : 1, &apos;skills&apos; : 1});
</code></pre><h4 id="2-使用and"><a href="#2-使用and" class="headerlink" title="2.使用and"></a><code>2.使用and</code></h4><pre><code>select name, age, skills from users where name = &apos;hurry&apos; and age = 18;
db.users.find({&apos;name&apos; : &apos;hurry&apos;, &apos;age&apos; : 18},{&apos;name&apos; : 1, &apos;age&apos; : 1, &apos;skills&apos; : 1});
</code></pre><h4 id="3-使用or"><a href="#3-使用or" class="headerlink" title="3.使用or"></a><code>3.使用or</code></h4><pre><code>select name, age, skills from users where name = &apos;hurry&apos; or age = 18;
db.users.find({ &apos;$or&apos; : [{&apos;name&apos; : &apos;hurry&apos;}, {&apos;age&apos; : 18}] },{&apos;name&apos; : 1, &apos;age&apos; : 1, &apos;skills&apos; : 1});
</code></pre><h4 id="4-lt-lt-gt-gt-lt-lte-gt-gte"><a href="#4-lt-lt-gt-gt-lt-lte-gt-gte" class="headerlink" title="4.&lt;, &lt;=, &gt;, &gt;= ($lt, $lte, $gt, $gte )"></a><code>4.&lt;, &lt;=, &gt;, &gt;= ($lt, $lte, $gt, $gte )</code></h4><pre><code>select * from users where age &gt;= 20 and age &lt;= 30;
db.users.find({&apos;age&apos; : {&apos;$gte&apos; : 20, &apos;$lte&apos; : 30}});
</code></pre><h4 id="5-使用in-not-in-in-nin"><a href="#5-使用in-not-in-in-nin" class="headerlink" title="5.使用in, not in ($in, $nin)"></a><code>5.使用in, not in ($in, $nin)</code></h4><pre><code>select * from users where age in (10, 22, 26);
db.users.find({&apos;age&apos; : {&apos;$in&apos; : [10, 22, 26]}});
</code></pre><h4 id="6-匹配null"><a href="#6-匹配null" class="headerlink" title="6.匹配null"></a><code>6.匹配null</code></h4><pre><code>select * from users where age is null;
db.users.find({&apos;age&apos; : null);
</code></pre><h4 id="7-like-mongoDB-支持正则表达式"><a href="#7-like-mongoDB-支持正则表达式" class="headerlink" title="7.like (mongoDB 支持正则表达式)"></a><code>7.like (mongoDB 支持正则表达式)</code></h4><pre><code>select * from users where name like &quot;%hurry%&quot;;
db.users.find({name:/hurry/});
select * from users where name like &quot;hurry%&quot;;
db.users.find({name:/^hurry/});
</code></pre><h4 id="8-使用distinct"><a href="#8-使用distinct" class="headerlink" title="8.使用distinct"></a><code>8.使用distinct</code></h4><pre><code>select distinct (name) from users;
db.users.distinct(&apos;name&apos;);
</code></pre><h4 id="9-使用count"><a href="#9-使用count" class="headerlink" title="9.使用count"></a><code>9.使用count</code></h4><pre><code>select count(*) from users;
db.users.count();
</code></pre><h4 id="10-数组查询-（mongoDB自己特有的）"><a href="#10-数组查询-（mongoDB自己特有的）" class="headerlink" title="10.数组查询 （mongoDB自己特有的）"></a><code>10.数组查询 （mongoDB自己特有的）</code></h4><pre><code>如果skills是 [&apos;java&apos;,&apos;python&apos;]
db.users.find({&apos;skills&apos; : &apos;java&apos;}); 该语句可以匹配成功
$all
db.users.find({&apos;skills&apos; : {&apos;$all&apos; : [&apos;java&apos;,&apos;python&apos;]}}) skills中必须同时包含java 和 python
$size
db.users.find({&apos;skills&apos; : {&apos;$size&apos; : 2}}) 遗憾的是$size不能与$lt等组合使用
$slice
db.users.find({&apos;skills&apos; : {&apos;$slice : [1,1]}})
两个参数分别是偏移量和返回的数量
</code></pre><h4 id="11-查询内嵌文档"><a href="#11-查询内嵌文档" class="headerlink" title="11.查询内嵌文档"></a><code>11.查询内嵌文档</code></h4><h4 id="12-强大的-where查询"><a href="#12-强大的-where查询" class="headerlink" title="12.强大的$where查询"></a><code>12.强大的$where查询</code></h4><pre><code>db.foo.find();
{ &quot;_id&quot; : ObjectId(&quot;4e17ce0ac39f1afe0ba78ce4&quot;), &quot;a&quot; : 1, &quot;b&quot; : 3, &quot;c&quot; : 10 }
{ &quot;_id&quot; : ObjectId(&quot;4e17ce13c39f1afe0ba78ce5&quot;), &quot;a&quot; : 1, &quot;b&quot; : 6, &quot;c&quot; : 6 }
如果要查询 b = c 的文档怎么办？
&gt; db.foo.find({&quot;$where&quot;:function(){
    for(var current in this){
        for(var other in this){
            if(current != other &amp;&amp; this[current] == this[other]){
                return true;
            }
        }
    }
    return false;
}});

{ &quot;_id&quot; : ObjectId(&quot;4e17ce13c39f1afe0ba78ce5&quot;), &quot;a&quot; : 1, &quot;b&quot; : 6, &quot;c&quot; : 6 }

  1 ) `. 大于，小于，大于或等于，小于或等于`
  $gt:大于
  $lt:小于
  $gte:大于或等于
  $lte:小于或等于
  例子：
  db.collection.find({ &quot;field&quot; : { $gt: value } } ); // greater than : field &gt; value
  db.collection.find({ &quot;field&quot; : { $lt: value } } ); // less than : field &lt; value
  db.collection.find({ &quot;field&quot; : { $gte: value } } ); // greater than or equal to : field &gt;= value
  db.collection.find({ &quot;field&quot; : { $lte: value } } ); // less than or equal to : field &lt;= value

  如查询j大于3,小于4:

  db.things.find({j : {$lt: 3}});
  db.things.find({j : {$gte: 4}});

  也可以合并在一条语句内:

  db.collection.find({ &quot;field&quot; : { $gt: value1, $lt: value2 } } ); // value1 &lt; field &lt; value



  2) 不等于 $ne
  例子：

  db.things.find( { x : { $ne : 3 } } );


  3) in 和 not in ($in $nin)
  语法：
  db.collection.find( { &quot;field&quot; : { $in : array } } );

  例子：

  db.things.find({j:{$in: [2,4,6]}});

  db.things.find({j:{$nin: [2,4,6]}});

  4) 取模运算$mod
  如下面的运算：
  db.things.find( &quot;this.a % 10 == 1&quot;)

  可用$mod代替：

  db.things.find( { a : { $mod : [ 10 , 1 ] } } )

  5)  $all
  $all和$in类似，但是他需要匹配条件内所有的值：
  如有一个对象：
  { a: [ 1, 2, 3 ] }

  下面这个条件是可以匹配的：

  db.things.find( { a: { $all: [ 2, 3 ] } } );

  但是下面这个条件就不行了：

  db.things.find( { a: { $all: [ 2, 3, 4 ] } } );

  6)  $size
  $size是匹配数组内的元素数量的，如有一个对象：{a:[&quot;foo&quot;]}，他只有一个元素：
  下面的语句就可以匹配：
  db.things.find( { a : { $size: 1 } } );

  官网上说不能用来匹配一个范围内的元素，如果想找$size&lt;5之类的，他们建议创建一个字段来保存元素的数量。
  You cannot use $size to find a range of sizes (for example: arrays with more than 1 element). If you need to query for a range, create an extra size field that you increment when you add elements.

  7）$exists
  $exists用来判断一个元素是否存在：
  如：

  db.things.find( { a : { $exists : true } } ); // 如果存在元素a,就返回
  db.things.find( { a : { $exists : false } } ); // 如果不存在元素a，就返回

  8)  $type
  $type 基于 bson type来匹配一个元素的类型，像是按照类型ID来匹配，不过我没找到bson类型和id对照表。

  db.things.find( { a : { $type : 2 } } ); // matches if a is a string
  db.things.find( { a : { $type : 16 } } ); // matches if a is an int

  9）正则表达式
  mongo支持正则表达式，如：
  db.customers.find( { name : /acme.*corp/i } ); // 后面的i的意思是区分大小写

  10)  查询数据内的值
  下面的查询是查询colors内red的记录，如果colors元素是一个数据,数据库将遍历这个数组的元素来查询。
  db.things.find( { colors : &quot;red&quot; } );

  11) $elemMatch
  如果对象有一个元素是数组，那么$elemMatch可以匹配内数组内的元素：
  &gt; t.find( { x : { $elemMatch : { a : 1, b : { $gt : 1 } } } } )
  { &quot;_id&quot; : ObjectId(&quot;4b5783300334000000000aa9&quot;),
  &quot;x&quot; : [ { &quot;a&quot; : 1, &quot;b&quot; : 3 }, 7, { &quot;b&quot; : 99 }, { &quot;a&quot; : 11 } ]
  }
  $elemMatch : { a : 1, b : { $gt : 1 } } 所有的条件都要匹配上才行。
  注意，上面的语句和下面是不一样的。

  &gt; t.find( { &quot;x.a&quot; : 1, &quot;x.b&quot; : { $gt : 1 } } )
  $elemMatch是匹配{ &quot;a&quot; : 1, &quot;b&quot; : 3 }，而后面一句是匹配{ &quot;b&quot; : 99 }, { &quot;a&quot; : 11 }

  12)  查询嵌入对象的值
  db.postings.find( { &quot;author.name&quot; : &quot;joe&quot; } );

  注意用法是author.name，用一个点就行了。更详细的可以看这个链接： dot notation
  举个例子：

  &gt; db.blog.save({ title : &quot;My First Post&quot;, author: {name : &quot;Jane&quot;, id : 1}})

  如果我们要查询 authors name 是Jane的, 我们可以这样：

  &gt; db.blog.findOne({&quot;author.name&quot; : &quot;Jane&quot;})

  如果不用点，那就需要用下面这句才能匹配：

  db.blog.findOne({&quot;author&quot; : {&quot;name&quot; : &quot;Jane&quot;, &quot;id&quot; : 1}})

  下面这句：

  db.blog.findOne({&quot;author&quot; : {&quot;name&quot; : &quot;Jane&quot;}})

  是不能匹配的，因为mongodb对于子对象，他是精确匹配。

  13) 元操作符 $not 取反
  如：

  db.customers.find( { name : { $not : /acme.*corp/i } } );

  db.things.find( { a : { $not : { $mod : [ 10 , 1 ] } } } );
  mongodb还有很多函数可以用，如排序，统计等，请参考原文。

  mongodb目前没有或(or)操作符，只能用变通的办法代替，可以参考下面的链接：

  http://www.mongodb.org/display/DOCS/OR+operations+in+query+expressions
  分类: MongoDB
</code></pre><h2 id="二、更新"><a href="#二、更新" class="headerlink" title="二、更新"></a>二、更新</h2><pre><code>mongodb更新有两个命令：
</code></pre><h4 id="1-update-命令"><a href="#1-update-命令" class="headerlink" title="1).update()命令"></a><code>1).update()命令</code></h4><pre><code>db.collection.update( criteria, objNew, upsert, multi )

criteria : update的查询条件，类似sql update查询内where后面的
objNew   : update的对象和一些更新的操作符（如$,$inc...）等，也可以理解为sql update查询内set后面的
upsert   : 这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。
multi    : mongodb默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。

例：
db.test0.update( { &quot;count&quot; : { $gt : 1 } } , { $set : { &quot;test2&quot; : &quot;OK&quot;} } ); 只更新了第一条记录
db.test0.update( { &quot;count&quot; : { $gt : 3 } } , { $set : { &quot;test2&quot; : &quot;OK&quot;} },false,true ); 全更新了
db.test0.update( { &quot;count&quot; : { $gt : 4 } } , { $set : { &quot;test5&quot; : &quot;OK&quot;} },true,false ); 只加进去了第一条
db.test0.update( { &quot;count&quot; : { $gt : 5 } } , { $set : { &quot;test5&quot; : &quot;OK&quot;} },true,true ); 全加进去了
db.test0.update( { &quot;count&quot; : { $gt : 15 } } , { $inc : { &quot;count&quot; : 1} },false,true );全更新了
db.test0.update( { &quot;count&quot; : { $gt : 10 } } , { $inc : { &quot;count&quot; : 1} },false,false );只更新了第一条
</code></pre><h4 id="2-save-命令"><a href="#2-save-命令" class="headerlink" title="2).save()命令"></a><code>2).save()命令</code></h4><pre><code>db.collection.save( x )

x就是要更新的对象，只能是单条记录。

如果在collection内已经存在一个和x对象相同的&quot;_id&quot;的记录。mongodb就会把x对象替换collection内已经存在的记录，否则将会插入x对象，如果x内没有_id,系统会自动生成一个再插入。相当于上面update语句的upsert=true,multi=false的情况。
例：
db.test0.save({count:40,test1:&quot;OK&quot;}); #_id系统会生成
db.test0.save({_id:40,count:40,test1:&quot;OK&quot;}); #如果test0内有_id等于40的，会替换，否则插入。

mongodb的更新操作符：
1) $inc
用法：{ $inc : { field : value } }
意思对一个数字字段field增加value，例：
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 16, &quot;test1&quot; : &quot;TESTTEST&quot;, &quot;test2&quot; : &quot;OK&quot;, &quot;test3&quot; : &quot;TESTTEST&quot;, &quot;test4&quot; : &quot;OK&quot;, &quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $inc : { &quot;count&quot; : 1 } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 17, &quot;test1&quot; : &quot;TESTTEST&quot;, &quot;test2&quot; : &quot;OK&quot;, &quot;test3&quot; : &quot;TESTTEST&quot;, &quot;test4&quot; : &quot;OK&quot;, &quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $inc : { &quot;count&quot; : 2 } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 19, &quot;test1&quot; : &quot;TESTTEST&quot;, &quot;test2&quot; : &quot;OK&quot;, &quot;test3&quot; : &quot;TESTTEST&quot;, &quot;test4&quot; : &quot;OK&quot;, &quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $inc : { &quot;count&quot; : -1 } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : &quot;TESTTEST&quot;, &quot;test2&quot; : &quot;OK&quot;, &quot;test3&quot; : &quot;TESTTEST&quot;, &quot;test4&quot; : &quot;OK&quot;, &quot;test5&quot; : &quot;OK&quot; }

2) $set
用法：{ $set : { field : value } }
就是相当于sql的set field = value，全部数据类型都支持$set。例：
&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $set : { &quot;test1&quot; : &quot;testv1&quot;,&quot;test2&quot; : &quot;testv2&quot;,&quot;test3&quot; : &quot;testv3&quot;,&quot;test4&quot; : &quot;testv4&quot; } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : &quot;testv1&quot;, &quot;test2&quot; : &quot;testv2&quot;, &quot;test3&quot; : &quot;testv3&quot;, &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }
</code></pre><h4 id="3-unset"><a href="#3-unset" class="headerlink" title="3) $unset"></a><code>3) $unset</code></h4><pre><code>用法：{ $unset : { field : 1} }
顾名思义，就是删除字段了。例：
&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $unset : { &quot;test1&quot;:1 } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test2&quot; : &quot;testv2&quot;, &quot;test3&quot; : &quot;testv3&quot;, &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $unset : { &quot;test2&quot;: 0 } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test3&quot; : &quot;testv3&quot;, &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $unset : { &quot;test3&quot;:asdfasf } } );
Fri May 14 16:17:38 JS Error: ReferenceError: asdfasf is not defined (shell):0

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $unset : { &quot;test3&quot;:&quot;test&quot; } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }

没看出field : 1里面的1是干什么用的，反正只要有东西就行。
</code></pre><h4 id="4-push"><a href="#4-push" class="headerlink" title="4) $push"></a><code>4) $push</code></h4><pre><code>用法：{ $push : { field : value } }
把value追加到field里面去，field一定要是数组类型才行，如果field不存在，会新增一个数组类型加进去。例：

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $set : { &quot;test1&quot; : [&quot;aaa&quot;,&quot;bbb&quot;] } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ &quot;aaa&quot;, &quot;bbb&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $push : { &quot;test1&quot;: &quot;ccc&quot; } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ &quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $push : { &quot;test2&quot;: &quot;ccc&quot; } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ &quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot; ], &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $push : { &quot;test1&quot;: [&quot;ddd&quot;,&quot;eee&quot;] } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ &quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;, [ &quot;ddd&quot;, &quot;eee&quot; ] ], &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }5) $pushAll
</code></pre><h4 id="5-pushAll"><a href="#5-pushAll" class="headerlink" title="5) $pushAll"></a><code>5) $pushAll</code></h4><pre><code>用法：{ $pushAll : { field : value_array } }
同$push,只是一次可以追加多个值到一个数组字段内。例：
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ &quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;, [ &quot;ddd&quot;, &quot;eee&quot; ] ], &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $pushAll : { &quot;test1&quot;: [&quot;fff&quot;,&quot;ggg&quot;] } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ &quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;, [ &quot;ddd&quot;, &quot;eee&quot; ], &quot;fff&quot;, &quot;ggg&quot; ], &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }
</code></pre><h4 id="6-addToSet"><a href="#6-addToSet" class="headerlink" title="6)  $addToSet"></a><code>6)  $addToSet</code></h4><pre><code>用法：{ $addToSet : { field : value } }
增加一个值到数组内，而且只有当这个值不在数组内才增加。例：
&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $addToSet : { &quot;test1&quot;: {$each : [&quot;444&quot;,&quot;555&quot;] } } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18,

  &quot;test1&quot; : [&quot;aaa&quot;,&quot;bbb&quot;,&quot;ccc&quot;,[&quot;ddd&quot;,&quot;eee&quot;],&quot;fff&quot;,&quot;ggg&quot;,[&quot;111&quot;,&quot;222&quot;],&quot;444&quot;,&quot;555&quot;],

  &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot;

 }
&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $addToSet : { &quot;test1&quot;: {$each : [&quot;444&quot;,&quot;555&quot;] } } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18,

  &quot;test1&quot; : [&quot;aaa&quot;,&quot;bbb&quot;,&quot;ccc&quot;,[&quot;ddd&quot;,&quot;eee&quot;],&quot;fff&quot;,&quot;ggg&quot;,[&quot;111&quot;,&quot;222&quot;],&quot;444&quot;,&quot;555&quot;], &quot;test2&quot; : [ &quot;ccc&quot; ],

  &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot;

}
&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $addToSet : { &quot;test1&quot;: [&quot;444&quot;,&quot;555&quot;] } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18,

  &quot;test1&quot; : [&quot;aaa&quot;,&quot;bbb&quot;,&quot;ccc&quot;,[&quot;ddd&quot;,&quot;eee&quot;],&quot;fff&quot;,&quot;ggg&quot;,[&quot;111&quot;,&quot;222&quot;],&quot;444&quot;,&quot;555&quot;,[&quot;444&quot;,&quot;555&quot;]], &quot;test2&quot; : [ &quot;ccc&quot; ],

  &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot;

}
&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $addToSet : { &quot;test1&quot;: [&quot;444&quot;,&quot;555&quot;] } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [&quot;aaa&quot;,&quot;bbb&quot;,&quot;ccc&quot;,[&quot;ddd&quot;,&quot;eee&quot;],&quot;fff&quot;,&quot;ggg&quot;,[&quot;111&quot;,&quot;222&quot;],&quot;444&quot;,&quot;555&quot;,[&quot;444&quot;,&quot;555&quot;]], &quot;test2&quot; : [ &quot;ccc&quot; ],

  &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot;

}
</code></pre><h4 id="7-pop"><a href="#7-pop" class="headerlink" title="7) $pop"></a><code>7) $pop</code></h4><pre><code>删除数组内的一个值
用法：
删除最后一个值：{ $pop : { field : 1 } }删除第一个值：{ $pop : { field : -1 } }
注意，只能删除一个值，也就是说只能用1或-1，而不能用2或-2来删除两条。mongodb 1.1及以后的版本才可以用，例：
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18,

  &quot;test1&quot; : [&quot;bbb&quot;,&quot;ccc&quot;,[&quot;ddd&quot;,&quot;eee&quot;],&quot;fff&quot;,&quot;ggg&quot;,[&quot;111&quot;,&quot;222&quot;],&quot;444&quot;],

  &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot;

}
&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $pop : { &quot;test1&quot;: -1 } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18,

  &quot;test1&quot; : [&quot;ccc&quot;,[&quot;ddd&quot;,&quot;eee&quot;],&quot;fff&quot;,&quot;ggg&quot;,[&quot;111&quot;,&quot;222&quot;],&quot;444&quot;],

  &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot;

 }
&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $pop : { &quot;test1&quot;: 1 } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18,

  &quot;test1&quot; : [ &quot;ccc&quot;, [ &quot;ddd&quot;, &quot;eee&quot; ], &quot;fff&quot;, &quot;ggg&quot;, [ &quot;111&quot;, &quot;222&quot; ] ], &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;,
  &quot;test5&quot; : &quot;OK&quot;

}
</code></pre><h4 id="8-pull"><a href="#8-pull" class="headerlink" title="8) $pull"></a><code>8) $pull</code></h4><pre><code>用法：$pull : { field : value } }
从数组field内删除一个等于value值。例：
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ &quot;ccc&quot;, [ &quot;ddd&quot;, &quot;eee&quot; ], &quot;fff&quot;, &quot;ggg&quot;, [ &quot;111&quot;, &quot;222&quot; ] ], &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;,
&quot;test5&quot; : &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $pull : { &quot;test1&quot;: &quot;ggg&quot; } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ &quot;ccc&quot;, [ &quot;ddd&quot;, &quot;eee&quot; ], &quot;fff&quot;, [ &quot;111&quot;, &quot;222&quot; ] ], &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot;
: &quot;OK&quot; }
</code></pre><h4 id="9-pullAll"><a href="#9-pullAll" class="headerlink" title="9) $pullAll"></a><code>9) $pullAll</code></h4><pre><code>用法：{ $pullAll : { field : value_array } }
同$pull,可以一次删除数组内的多个值。例：
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ &quot;ccc&quot;, [ &quot;ddd&quot;, &quot;eee&quot; ], &quot;fff&quot;, [ &quot;111&quot;, &quot;222&quot; ] ], &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot;
: &quot;OK&quot; }

&gt; db.test0.update( { &quot;_id&quot; : 15 } , { $pullAll : { &quot;test1&quot;: [ &quot;ccc&quot; , &quot;fff&quot; ] } } );
&gt; db.test0.find( { &quot;_id&quot; : 15 } );
{ &quot;_id&quot; : { &quot;floatApprox&quot; : 15 }, &quot;count&quot; : 18, &quot;test1&quot; : [ [ &quot;ddd&quot;, &quot;eee&quot; ], [ &quot;111&quot;, &quot;222&quot; ] ], &quot;test2&quot; : [ &quot;ccc&quot; ], &quot;test4&quot; : &quot;testv4&quot;, &quot;test5&quot; : &quot;OK&quot; }
</code></pre><h4 id="10-操作符"><a href="#10-操作符" class="headerlink" title="10) $ 操作符"></a><code>10) $ 操作符</code></h4><pre><code>$是他自己的意思，代表按条件找出的数组里面某项他自己。呵呵，比较坳口。看一下官方的例子：
&gt; t.find()
{ &quot;_id&quot; : ObjectId(&quot;4b97e62bf1d8c7152c9ccb74&quot;), &quot;title&quot; : &quot;ABC&quot;, &quot;comments&quot; : [ { &quot;by&quot; : &quot;joe&quot;, &quot;votes&quot; : 3 }, { &quot;by&quot; : &quot;jane&quot;, &quot;votes&quot; : 7 } ] }

&gt; t.update( {&apos;comments.by&apos;:&apos;joe&apos;}, {$inc:{&apos;comments.$.votes&apos;:1}}, false, true )

&gt; t.find()
{ &quot;_id&quot; : ObjectId(&quot;4b97e62bf1d8c7152c9ccb74&quot;), &quot;title&quot; : &quot;ABC&quot;, &quot;comments&quot; : [ { &quot;by&quot; : &quot;joe&quot;, &quot;votes&quot; : 4 }, { &quot;by&quot; : &quot;jane&quot;, &quot;votes&quot; : 7 } ] }

需要注意的是，$只会应用找到的第一条数组项，后面的就不管了。还是看例子：
&gt; t.find();
{ &quot;_id&quot; : ObjectId(&quot;4b9e4a1fc583fa1c76198319&quot;), &quot;x&quot; : [ 1, 2, 3, 2 ] }
&gt; t.update({x: 2}, {$inc: {&quot;x.$&quot;: 1}}, false, true);
&gt; t.find();

还有注意的是$配合$unset使用的时候，会留下一个null的数组项，不过可以用{$pull:{x:null}}删除全部是null的数组项。例：
&gt; t.insert({x: [1,2,3,4,3,2,3,4]})
&gt; t.find()
{ &quot;_id&quot; : ObjectId(&quot;4bde2ad3755d00000000710e&quot;), &quot;x&quot; : [ 1, 2, 3, 4, 3, 2, 3, 4 ] }
&gt; t.update({x:3}, {$unset:{&quot;x.$&quot;:1}})
&gt; t.find()
{ &quot;_id&quot; : ObjectId(&quot;4bde2ad3755d00000000710e&quot;), &quot;x&quot; : [ 1, 2, null, 4, 3, 2, 3, 4 ] }

{ &quot;_id&quot; : ObjectId(&quot;4b9e4a1fc583fa1c76198319&quot;), &quot;x&quot; : [ 1, 3, 3, 2 ] }





============  数组元素操作示例 ================

&gt; db.arraytest.insert({id:2, name:&apos;leon&apos;, comments:[{id:&apos;011&apos;, content:&apos;cmt11&apos;}, {id:&apos;012&apos;, content:&apos;cmt12&apos;}, {id:&apos;013&apos;, content:&apos;cmt13&apos;}]})

1. 数组内的元素可以直接查询
&gt; db.arraytest.find({&apos;comments.id&apos;:&apos;002&apos;})
2. 更新数组中的某个节点的值,用$符号
db.arraytest.update({&apos;comments.id&apos;:&apos;012&apos;}, {$set: {&apos;comments.$.content&apos;:&apos;cmtttt012&apos;}})
3. 删除数组中的某一列，变成null
&gt; db.arraytest.update({&apos;comments.id&apos;:&apos;012&apos;}, {$unset: {&apos;comments.$&apos;:1}})
 4. 向数组中添加一个元素，如果之前没有元素则会新建数组
&gt; db.arraytest.update({&apos;comments.id&apos;:&apos;112&apos;}, {$push: {&apos;comments.$.reply&apos;: {&apos;rid&apos;:&apos;r21&apos;, content:&apos;reply22&apos;}}})
</code></pre>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/mongodb/" rel="tag"># mongodb</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/01/12/2014-01-12-mongodb-hole/" rel="next" title="MongoDB遇到的坑">
                <i class="fa fa-chevron-left"></i> MongoDB遇到的坑
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2014/02/11/2014-02-11-nosql-diff/" rel="prev" title="MongoDB、Redis、Memcached 的不同？">
                MongoDB、Redis、Memcached 的不同？ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Will</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yunheli" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:liyunhehappy6@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、查询"><span class="nav-number">1.</span> <span class="nav-text">一、查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#find方法"><span class="nav-number">1.1.</span> <span class="nav-text">find方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查询所有的结果："><span class="nav-number">1.2.</span> <span class="nav-text">查询所有的结果：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指定返回那些列（键）："><span class="nav-number">1.3.</span> <span class="nav-text">指定返回那些列（键）：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#where条件："><span class="nav-number">1.4.</span> <span class="nav-text">where条件：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-简单的等于"><span class="nav-number">1.4.1.</span> <span class="nav-text">1.简单的等于:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-使用and"><span class="nav-number">1.4.2.</span> <span class="nav-text">2.使用and</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-使用or"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.使用or</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-lt-lt-gt-gt-lt-lte-gt-gte"><span class="nav-number">1.4.4.</span> <span class="nav-text">4.&lt;, &lt;=, &gt;, &gt;= ($lt, $lte, $gt, $gte )</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-使用in-not-in-in-nin"><span class="nav-number">1.4.5.</span> <span class="nav-text">5.使用in, not in ($in, $nin)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-匹配null"><span class="nav-number">1.4.6.</span> <span class="nav-text">6.匹配null</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-like-mongoDB-支持正则表达式"><span class="nav-number">1.4.7.</span> <span class="nav-text">7.like (mongoDB 支持正则表达式)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-使用distinct"><span class="nav-number">1.4.8.</span> <span class="nav-text">8.使用distinct</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-使用count"><span class="nav-number">1.4.9.</span> <span class="nav-text">9.使用count</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-数组查询-（mongoDB自己特有的）"><span class="nav-number">1.4.10.</span> <span class="nav-text">10.数组查询 （mongoDB自己特有的）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-查询内嵌文档"><span class="nav-number">1.4.11.</span> <span class="nav-text">11.查询内嵌文档</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#12-强大的-where查询"><span class="nav-number">1.4.12.</span> <span class="nav-text">12.强大的$where查询</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、更新"><span class="nav-number">2.</span> <span class="nav-text">二、更新</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-update-命令"><span class="nav-number">2.0.1.</span> <span class="nav-text">1).update()命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-save-命令"><span class="nav-number">2.0.2.</span> <span class="nav-text">2).save()命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-unset"><span class="nav-number">2.0.3.</span> <span class="nav-text">3) $unset</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-push"><span class="nav-number">2.0.4.</span> <span class="nav-text">4) $push</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-pushAll"><span class="nav-number">2.0.5.</span> <span class="nav-text">5) $pushAll</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-addToSet"><span class="nav-number">2.0.6.</span> <span class="nav-text">6)  $addToSet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-pop"><span class="nav-number">2.0.7.</span> <span class="nav-text">7) $pop</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-pull"><span class="nav-number">2.0.8.</span> <span class="nav-text">8) $pull</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-pullAll"><span class="nav-number">2.0.9.</span> <span class="nav-text">9) $pullAll</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-操作符"><span class="nav-number">2.0.10.</span> <span class="nav-text">10) $ 操作符</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Will</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
